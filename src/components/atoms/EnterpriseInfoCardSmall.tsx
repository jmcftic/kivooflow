import { cn } from "@/lib/utils"
import React from "react"

interface EnterpriseInfoCardSmallProps {
  primaryText: string;
  secondaryText: string;
  className?: string;
  gradientColor?: string;
  backgroundColor?: string;
  height?: number;
  showChart?: boolean;
}

// SVG Background para el componente peque침o - escalado proporcionalmente desde 541x172
// Ratio: 129/172 = 0.75
const SmallCardSVG = () => {
  return (
    <svg 
      width="100%" 
      height="100%" 
      viewBox="0 0 541 172"
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      preserveAspectRatio="none"
    >
      <mask id="path-1-inside-1_small" fill="white">
        <path d="M541 0.049407C541 0.0766229 540.978 0.0987137 540.951 0.0988136L501.922 0.242188C501.051 0.219151 500.473 0.247381 500.46 0.248047L501.922 0.242188C503.578 0.285987 506.295 0.517753 508.209 1.49023C511.141 2.98017 528.107 18.6244 533.553 23.5908C539.679 29.1781 540.54 35.3956 540.656 36.7364C540.664 36.824 540.781 36.8546 540.833 36.7837C540.886 36.7118 541 36.7492 541 36.8386V164C541 168.418 537.418 172 533 172H8.21778C3.7995 172 0.217773 168.418 0.217773 164V8C0.217773 3.58173 3.7995 0 8.21777 0H540.951C540.978 0 541 0.0221203 541 0.049407Z"/>
      </mask>
      <path d="M541 0.049407C541 0.0766229 540.978 0.0987137 540.951 0.0988136L501.922 0.242188C501.051 0.219151 500.473 0.247381 500.46 0.248047L501.922 0.242188C503.578 0.285987 506.295 0.517753 508.209 1.49023C511.141 2.98017 528.107 18.6244 533.553 23.5908C539.679 29.1781 540.54 35.3956 540.656 36.7364C540.664 36.824 540.781 36.8546 540.833 36.7837C540.886 36.7118 541 36.7492 541 36.8386V164C541 168.418 537.418 172 533 172H8.21778C3.7995 172 0.217773 168.418 0.217773 164V8C0.217773 3.58173 3.7995 0 8.21777 0H540.951C540.978 0 541 0.0221203 541 0.049407Z" fill="#212020"/>
      <path d="M541 0.049407C541 0.0766229 540.978 0.0987137 540.951 0.0988136L501.922 0.242188C501.051 0.219151 500.473 0.247381 500.46 0.248047L501.922 0.242188C503.578 0.285987 506.295 0.517753 508.209 1.49023C511.141 2.98017 528.107 18.6244 533.553 23.5908C539.679 29.1781 540.54 35.3956 540.656 36.7364C540.664 36.824 540.781 36.8546 540.833 36.7837C540.886 36.7118 541 36.7492 541 36.8386V164C541 168.418 537.418 172 533 172H8.21778C3.7995 172 0.217773 168.418 0.217773 164V8C0.217773 3.58173 3.7995 0 8.21777 0H540.951C540.978 0 541 0.0221203 541 0.049407Z" fill="url(#paint0_linear_small)" fillOpacity="0.2"/>
      <path d="M500.46 0.248047L500.409 -0.750662L500.464 1.24804L500.46 0.248047ZM508.209 1.49023L508.662 0.598721L508.662 0.598714L508.209 1.49023ZM533.553 23.5908L534.227 22.852L534.227 22.852L533.553 23.5908ZM540.833 36.7837L541.638 37.3763L540.833 36.7837ZM540.656 36.7364L541.652 36.6498L540.656 36.7364ZM540.951 0.0988136L540.947 -0.90118L540.951 0.0988136ZM540.951 0.0988136L540.947 -0.90118L501.918 -0.757806L501.922 0.242188L501.926 1.24218L540.954 1.09881L540.951 0.0988136ZM501.922 0.242188L501.948 -0.757463C501.046 -0.781331 500.442 -0.752312 500.409 -0.750662L500.46 0.248047L500.511 1.24676C500.504 1.24707 501.056 1.21963 501.895 1.24184L501.922 0.242188ZM500.46 0.248047L500.464 1.24804L501.926 1.24218L501.922 0.242188L501.918 -0.757804L500.456 -0.751945L500.46 0.248047ZM501.922 0.242188L501.895 1.24184C503.542 1.28538 506.059 1.51934 507.756 2.38176L508.209 1.49023L508.662 0.598714C506.531 -0.483832 503.614 -0.713402 501.948 -0.757463L501.922 0.242188ZM508.209 1.49023L507.756 2.38175C508.029 2.52067 508.548 2.87361 509.307 3.45699C510.046 4.02447 510.958 4.76681 511.997 5.63934C514.074 7.38356 516.631 9.62624 519.273 11.9831C524.556 16.6963 530.152 21.8425 532.879 24.3297L533.553 23.5908L534.227 22.852C531.508 20.3727 525.898 15.2136 520.604 10.4906C517.957 8.12933 515.383 5.8712 513.283 4.10788C512.234 3.22665 511.297 2.46354 510.526 1.87089C509.775 1.29414 509.122 0.832278 508.662 0.598721L508.209 1.49023ZM533.553 23.5908L532.879 24.3297C538.753 29.6872 539.556 35.6257 539.66 36.823L540.656 36.7364L541.652 36.6498C541.523 35.1655 540.605 28.6689 534.227 22.852L533.553 23.5908ZM541 36.8386H540V164H541H542V36.8386H541ZM533 172V171H8.21778V172V173H533V172ZM0.217773 164H1.21777V8H0.217773H-0.782227V164H0.217773ZM8.21777 0V1H540.951V0V-1H8.21777V0ZM540.951 0V1C540.425 1 540 0.573724 540 0.049407H541H542C542 -0.529483 541.531 -1 540.951 -1V0ZM0.217773 8H1.21777C1.21777 4.13401 4.35178 1 8.21777 1V0V-1C3.24721 -1 -0.782227 3.02944 -0.782227 8H0.217773ZM8.21778 172V171C4.35179 171 1.21777 167.866 1.21777 164H0.217773H-0.782227C-0.782227 168.971 3.24722 173 8.21778 173V172ZM541 164H540C540 167.866 536.866 171 533 171V172V173C537.971 173 542 168.971 542 164H541ZM540.833 36.7837L541.638 37.3763C541.119 38.0822 540 37.7149 540 36.8386H541H542C542 35.7835 540.653 35.3413 540.027 36.1911L540.833 36.7837ZM540.656 36.7364L539.66 36.823C539.752 37.884 541.072 38.1457 541.638 37.3763L540.833 36.7837L540.027 36.1911C540.279 35.8488 540.683 35.773 540.984 35.8529C541.289 35.9338 541.614 36.2095 541.652 36.6498L540.656 36.7364ZM540.951 0.0988136L540.954 1.09881C541.533 1.09668 542 0.627474 542 0.049407H541H540C540 -0.474228 540.423 -0.899256 540.947 -0.90118L540.951 0.0988136Z" fill="#3C3C3C" mask="url(#path-1-inside-1_small)"/>
      <defs>
        <linearGradient id="paint0_linear_small" x1="270.609" y1="172" x2="270.609" y2="0" gradientUnits="userSpaceOnUse">
          <stop stopOpacity="0"/>
          <stop offset="1" stopColor="#FFF100" stopOpacity="0.28"/>
        </linearGradient>
      </defs>
    </svg>
  );
};

// SVG Chart para la gr치fica en la parte inferior derecha del componente peque침o
const SmallChartSVG = () => (
  <svg 
    width="195" 
    height="114" 
    viewBox="0 0 195 114" 
    fill="none" 
    xmlns="http://www.w3.org/2000/svg"
    preserveAspectRatio="xMidYMid meet"
    style={{ display: 'block' }}
  >
    <path d="M4.24645 43.7457L0.709351 40.0492V90L192.709 113.5V42.5L187.209 32L184.004 27.513C182.878 25.9359 181.059 25 179.121 25C178.865 25 178.626 25.131 178.488 25.3474L167.689 42.3179C166.223 44.6213 162.931 44.8118 161.21 42.6928L152.565 32.0537C152.058 31.4293 151.2 31.2146 150.458 31.5268L143.866 34.3026C142.851 34.73 141.681 34.5472 140.845 33.8304C139.654 32.8098 137.869 32.9172 136.809 34.0733L136.45 34.4646C134.856 36.2039 132.026 35.8701 130.88 33.8076L129.424 31.1872C128.651 29.795 127.323 28.7966 125.771 28.4403L125.209 28.3115C123.91 28.7587 122.789 29.611 122.011 30.743L119.21 34.8175C118.284 36.1636 116.699 36.899 115.074 36.7365C113.595 36.5886 112.139 37.1839 111.188 38.3256L104.073 46.8632C103.251 47.8504 101.907 48.2326 100.688 47.8262C100.052 47.6144 99.5019 47.2037 99.1178 46.6549L96.9425 43.5473C96.4547 42.8504 95.9069 42.1975 95.3054 41.596L95.03 41.3206C93.4942 39.7849 92.2324 37.9977 91.2991 36.0366L90.0406 33.3919L87.3623 26.1872L80.8354 36.9662C80.4817 37.5502 79.739 37.7648 79.1284 37.4595C78.5887 37.1897 77.9346 37.3232 77.5439 37.7829L70.2917 46.3149C69.9223 46.7495 69.3806 47 68.8102 47C68.1272 47 67.4943 46.6417 67.143 46.056L62.7108 38.6691C62.0895 37.6336 60.9704 37 59.7628 37C58.4981 37 57.3354 36.3056 56.7358 35.192L54.8382 31.6678C54.4361 30.9211 53.7494 30.3686 52.934 30.1356C51.6108 29.7576 50.1955 30.2842 49.4412 31.4352L46.1224 36.5L45.2094 38.1372L41.7094 46L37.9824 53.371C37.8149 53.7023 37.4753 53.9111 37.1041 53.9111C36.8507 53.9111 36.6071 53.8134 36.424 53.6383L36.1366 53.3636C35.8579 53.0971 35.6632 52.7549 35.5766 52.3792L29.4934 25.9844C29.4515 25.8023 29.3784 25.6288 29.2775 25.4716C28.7223 24.6067 27.5135 24.4682 26.777 25.1852L26.6108 25.3471C26.3677 25.5838 26.1959 25.8839 26.1148 26.2133L22.8777 39.3651C22.7734 39.789 22.4528 40.1263 22.0347 40.252C21.5389 40.4009 21.0029 40.2247 20.6923 39.8106L20.3352 39.3345C19.9412 38.8092 19.3229 38.5 18.6663 38.5H18.3677C17.3514 38.5 16.4222 39.0742 15.9677 39.9833L14.89 42.1387C12.8533 46.2121 7.39496 47.0362 4.24645 43.7457Z" fill="url(#paint0_linear_small_chart)"/>
    <path d="M0.709351 40.2927L7.48941 45.4086C9.42637 46.8701 12.251 45.9937 13.2554 43.7848C15.0399 39.8602 17.8352 35.3654 20.2044 38.8387C24.0293 44.4462 24.2523 21.5925 28.718 23.2625C30.939 24.0931 31.4069 34.7358 33.4067 43.6156C34.4456 48.2286 35.0757 51.2504 36.0093 52.7886C36.7386 53.9903 38.2116 53.1667 38.7731 51.8779L45.77 35.8179C45.8737 35.5799 46.1892 35.5295 46.3619 35.7233C46.5348 35.9173 46.8506 35.8666 46.954 35.6282L48.8444 31.2702C50.0871 28.4054 54.2136 28.6007 55.1802 31.57L56.5932 35.9107C56.9488 37.003 58.3046 37.3772 59.17 36.6218C59.9423 35.9478 61.1402 36.1624 61.6304 37.0626L66.0147 45.1133C67.2875 47.4504 70.5893 47.5949 72.0613 45.3779L77.3518 37.4103C77.8052 36.7274 78.7469 36.5807 79.3866 37.0934C80.0967 37.6626 81.1529 37.4105 81.5293 36.5819L86.2499 26.1913C86.6732 25.2596 87.9467 25.1364 88.5408 25.9697C88.6352 26.1022 88.7046 26.2509 88.7453 26.4085L91.43 36.7993C91.6593 37.6867 92.3086 38.4056 93.1681 38.7237C93.7577 38.9419 94.2566 39.3523 94.5845 39.8887L98.3741 46.088C99.6303 48.1431 102.53 48.3664 104.086 46.5279L112.066 37.099C112.935 36.0732 114.427 35.8467 115.561 36.5687C116.93 37.4411 118.755 36.9084 119.44 35.436L122.254 29.3897C123.476 26.7632 127.165 26.6426 128.556 29.1837L131.006 33.6579C132.069 35.6006 134.871 35.5678 135.889 33.6008C136.812 31.8162 139.27 31.5804 140.515 33.1569L140.624 33.2951C141.531 34.4425 143.154 34.7282 144.398 33.9593L148.405 31.4823C149.954 30.5249 151.977 30.9016 153.078 32.3524L161.94 44.0338C163.49 46.0778 166.634 45.8399 167.859 43.5857L177.288 26.2385C178.626 23.7772 182.159 23.7773 183.497 26.2385L187.032 32.7424L193.709 46" stroke="#C94740" strokeWidth="2.35556"/>
    <defs>
      <linearGradient id="paint0_linear_small_chart" x1="44.6496" y1="23.7972" x2="44.6496" y2="90" gradientUnits="userSpaceOnUse">
        <stop stopColor="#C94740" stopOpacity="0.3"/>
        <stop offset="1" stopColor="#C94740" stopOpacity="0"/>
      </linearGradient>
    </defs>
  </svg>
);

export function EnterpriseInfoCardSmall({
  primaryText,
  secondaryText,
  className,
  gradientColor = "#fff000",
  backgroundColor = "#2d2d2d",
  height = 129,
  showChart = false,
}: EnterpriseInfoCardSmallProps) {
  return (
    <div 
      className={cn("relative w-full overflow-hidden isolate", className)} 
      style={{ height: `${height}px` }}
    >
      {/* SVG Background - mantiene dimensiones proporcionales aunque el contenedor se estire */}
      <div className="absolute inset-0" style={{ pointerEvents: 'none' }}>
        <SmallCardSVG />
      </div>

      {/* Content container */}
      <div className="relative z-10 h-full flex flex-col px-6 py-4">
        {/* Texto principal - alineado a la izquierda arriba */}
        <div className="flex-1 flex flex-col justify-start">
          <div 
            className="text-white"
            style={{ 
              height: '40px',
              display: 'flex',
              alignItems: 'flex-start',
              fontFamily: 'Archivo, sans-serif',
              fontSize: '40px',
              lineHeight: '1'
            }}
          >
            {primaryText}
          </div>
          
          {/* Texto secundario - debajo del principal */}
          <div 
            className="text-gray-400 mt-1"
            style={{ 
              height: '18px',
              fontFamily: 'Archivo, sans-serif',
              fontSize: '14px',
              lineHeight: '1.29'
            }}
          >
            {secondaryText}
          </div>
        </div>
      </div>

      {/* Gr치fica en la parte inferior derecha - solo se muestra si showChart es true */}
      {showChart && (
        <div 
          className="absolute"
          style={{ 
            bottom: '10px',
            right: '0',
            width: '195px',
            height: '114px',
            zIndex: 5
          }}
        >
          <SmallChartSVG />
        </div>
      )}
    </div>
  )
}

export default EnterpriseInfoCardSmall

